<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Doc-4-Type</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/doc-for-type/assets/css/0.styles.3e076d2e.css" as="style"><link rel="preload" href="/doc-for-type/assets/js/app.8a616885.js" as="script"><link rel="preload" href="/doc-for-type/assets/js/2.2d31b58f.js" as="script"><link rel="preload" href="/doc-for-type/assets/js/7.7b97b87d.js" as="script"><link rel="prefetch" href="/doc-for-type/assets/js/10.90b981bf.js"><link rel="prefetch" href="/doc-for-type/assets/js/11.688b3971.js"><link rel="prefetch" href="/doc-for-type/assets/js/3.d7fe1a17.js"><link rel="prefetch" href="/doc-for-type/assets/js/4.380b5fee.js"><link rel="prefetch" href="/doc-for-type/assets/js/5.1fba1e6a.js"><link rel="prefetch" href="/doc-for-type/assets/js/6.c9ba3333.js"><link rel="prefetch" href="/doc-for-type/assets/js/8.0a0a04eb.js"><link rel="prefetch" href="/doc-for-type/assets/js/9.ad459959.js">
    <link rel="stylesheet" href="/doc-for-type/assets/css/0.styles.3e076d2e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc-for-type/" aria-current="page" class="home-link router-link-exact-active router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/ExcitedSpider/doc-for-type" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/ExcitedSpider/doc-for-type" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/doc-for-type/" aria-current="page" class="active sidebar-link">Doc-4-Type</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-for-type/#type-as-doc-类型即文档" class="sidebar-link">Type as Doc / 类型即文档</a></li><li class="sidebar-sub-header"><a href="/doc-for-type/#background" class="sidebar-link">Background</a></li><li class="sidebar-sub-header"><a href="/doc-for-type/#quickstart" class="sidebar-link">QuickStart</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-for-type/#js-api" class="sidebar-link">JS API</a></li><li class="sidebar-sub-header"><a href="/doc-for-type/#cli" class="sidebar-link">CLI</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc-for-type/#了解详细使用方法" class="sidebar-link">了解详细使用方法</a></li><li class="sidebar-sub-header"><a href="/doc-for-type/#tip" class="sidebar-link">TIP</a></li><li class="sidebar-sub-header"><a href="/doc-for-type/#已知问题" class="sidebar-link">已知问题</a></li><li class="sidebar-sub-header"><a href="/doc-for-type/#todo" class="sidebar-link">TODO</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Document</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="doc-4-type"><a href="#doc-4-type" class="header-anchor">#</a> Doc-4-Type</h1> <blockquote><p>🎉 本项目已发布 beta 版，<a href="https://www.npmjs.com/package/doc-for-type" target="_blank" rel="noopener noreferrer">欢迎试用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><a href="https://www.npmjs.com/package/doc-for-type" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/doc-for-type.svg" alt="npm version"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <img src="https://github.com/ExcitedSpider/doc-for-type/workflows/node-test/badge.svg" alt="node-test"></p> <p>根据 TypeScript 类型+代码注释自动生成代码文档的工具。支持生成的文档类型包括 markdown, html, 以及 json。</p> <p>与 markdown 静态页面生成器(e.g. <a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener noreferrer">vuepress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)搭配使用，可以实现类型文档自动化。</p> <p>本文档也是工具搭配文档生成器VuePress使用的例子，可以查看 <a href="https://github.com/ExcitedSpider/doc-for-type/tree/master/docs" target="_blank" rel="noopener noreferrer">docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中的示例。</p> <h2 id="type-as-doc-类型即文档"><a href="#type-as-doc-类型即文档" class="header-anchor">#</a> Type as Doc / 类型即文档</h2> <p>江湖中有一句话叫&quot;类型是最好的注释&quot;。例如以下类型，不看任何注释，我们也可以清晰明了地知道这个图形绘制配置项对象大概怎么使用。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/** 绘制一个基本图形 */</span>
<span class="token keyword">type</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 椭圆还是矩形 */</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'circle'</span> <span class="token operator">|</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更进一步，我们希望可以做到通过类型直接生成文档，免去耗时的手工文档工作。搭配一些页面生成器就能轻易生成主页。</p> <div class="language-md extra-class"><pre class="language-md"><code><span class="token title important"><span class="token punctuation">#</span> Shape</span>

<span class="token list punctuation">*</span> type: <span class="token code keyword">`object`</span>
<span class="token list punctuation">*</span> 描述: 绘制一个基本图形

<span class="token title important"><span class="token punctuation">##</span> type</span>

<span class="token list punctuation">*</span> type: <span class="token code keyword">`'circle' | 'square'`</span>
<span class="token list punctuation">*</span> 描述: 椭圆还是矩形

</code></pre></div><p>这就是本项目的基本愿景。</p> <h2 id="background"><a href="#background" class="header-anchor">#</a> Background</h2> <p>Inspired and builds upon <a href="https://github.com/YousefED/typescript-json-schema" target="_blank" rel="noopener noreferrer">typescript-json-schema<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="quickstart"><a href="#quickstart" class="header-anchor">#</a> QuickStart</h2> <p>假设我们的目录结构:</p> <div class="language- extra-class"><pre class="language-text"><code>.
├── package-lock.json
├── package.json
└── src
    ├── main.js
    └── type.ts &lt;- 想要生成文档的类型文件 
</code></pre></div><p>其中，type.ts 中定义了一个类型 <code>MyObject</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Type1</span> <span class="token punctuation">{</span>
  value1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  value2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Type2</span> <span class="token punctuation">{</span>
  value2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  value3<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">MyObject</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> Type1 <span class="token operator">&amp;</span> Type2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>本工具有两种方式可供使用: JS API 或 CLI。功能完整度相同，都会生成一样的 markdown 文档。</p> <h3 id="js-api"><a href="#js-api" class="header-anchor">#</a> JS API</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> i doc-for-type
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> doc4Type <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;doc-for-type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">doc4Type</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./type.ts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  typeName<span class="token operator">:</span> <span class="token string">&quot;MyObject&quot;</span><span class="token punctuation">,</span>
  format<span class="token operator">:</span> <span class="token string">'markdown'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ node src/main.js
</code></pre></div><h3 id="cli"><a href="#cli" class="header-anchor">#</a> CLI</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> i doc-for-type -g
$ doc4type --input ./src/type.ts --typeName MyObject
</code></pre></div><h2 id="了解详细使用方法"><a href="#了解详细使用方法" class="header-anchor">#</a> 了解详细使用方法</h2> <p>请查看我们的<a href="document">JS API 文档</a>。以及<a href="/doc-for-type/document/annotation.html">注释 API 文档</a></p> <h2 id="tip"><a href="#tip" class="header-anchor">#</a> TIP</h2> <ul><li>推荐多使用 <code>Interface</code>，这样可以在编译解析时保留接口名称，而 <code>Type</code> 会被丢弃。</li></ul> <h2 id="已知问题"><a href="#已知问题" class="header-anchor">#</a> 已知问题</h2> <ul><li><s>对递归类型的支持 8 行</s> 现在行了，做了环检测</li> <li>不展示 index type 的细节类型，只展示 <code>object</code>。因为暂时没想好怎么在文档里表现，有建议可以帮我提个 issue。</li></ul> <h2 id="todo"><a href="#todo" class="header-anchor">#</a> TODO</h2> <ul class="contains-task-list"><li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 仅能展开到两层</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 每一个逻辑都要处理 <code>properties</code> <code>anyof</code> <code>array</code> 太麻烦了</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 需要展开的配置项目没有根页面</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 自动侧边栏生成问题</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 支持注释 hint</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> @link 的支持</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 文档更新的问题 - 很难解决</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> test case</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> @quote 公共片段渲染 - 不做，因为 markdown 标准语法中没有引用外部片段的定义。</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> required 的支持
<ul class="contains-task-list"><li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> required 可配置是否开启</li></ul></li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> default 的支持</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> ejs 可读性太差</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 输出 JSON
<ul class="contains-task-list"><li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 支持文件名后缀自动生成</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 接 remark 库，可以生成 html、也可以支持开发插件</li></ul></li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 输出其他更多格式</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> unified 插件支持</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 提供 dir + name 替代 outputPath - 不太需要</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 自定义生成的文档片段格式</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> Union 类型的文档生成如何与 Object prop 区分</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 顶层 union type 问题 - 已提 issue</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 发布 npm 包</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> API 支持输入字符串 format 而不仅是枚举</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 主页
<ul class="contains-task-list"><li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> PlayGround</li></ul></li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 复杂文档片段的生成</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 生成 yaml 头内容</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 生成 title</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 递归类型的问题</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 支持 index type - 还未确定如何渲染会好看</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 支持自定义标签+渲染片段</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 工程化
<ul class="contains-task-list"><li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 测试流水线</li> <li class="task-list-item"><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> eslint</li> <li class="task-list-item"><input disabled="disabled" type="checkbox" class="task-list-item-checkbox"> 发布流水线</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/doc-for-type/assets/js/app.8a616885.js" defer></script><script src="/doc-for-type/assets/js/2.2d31b58f.js" defer></script><script src="/doc-for-type/assets/js/7.7b97b87d.js" defer></script>
  </body>
</html>
